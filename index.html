<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>Valentine Card ‚ù§Ô∏è</title>

<!-- FONT -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

<!-- LEAFLET -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body{
  margin:0;
  font-family:sans-serif;
  text-align:center;
  background:linear-gradient(135deg,#ffd6e0,#fff);
  overflow-x:hidden;
}

/* ‚ù§Ô∏è hearts */
.heart{
  position:fixed;
  bottom:-20px;
  font-size:20px;
  animation:fall 6s linear infinite;
}
@keyframes fall{
  to{transform:translateY(-110vh);opacity:0;}
}

/* card */
.card{
  background:#ffb6c1;
  width:340px;
  margin:30px auto;
  padding:20px;
  border-radius:18px;
}

/* textarea */
textarea{
  width:100%;
  height:130px;
  border:none;
  border-radius:10px;
  padding:10px;
  font-family:'Great Vibes',cursive;
  font-size:22px;
}

/* button */
button{
  background:#ff4d6d;
  color:white;
  border:none;
  padding:10px 18px;
  margin:6px;
  border-radius:8px;
  cursor:pointer;
}

/* gallery */
.gallery{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  width:90%;
  margin:auto;
}
.gallery img{
  width:100%;
  border-radius:12px;
}

/* map */
#map{
  height:300px;
  width:90%;
  margin:20px auto;
  border-radius:12px;
}

/* poem popup */
#poemBox{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  justify-content:center;
  align-items:center;
}
.poem{
  background:white;
  padding:20px;
  border-radius:12px;
  max-width:320px;
}
</style>
</head>

<body>

<h1>üíå Valentine Card</h1>

<!-- CARD -->
<div class="card">

<textarea id="message"></textarea><br>

<button onclick="toggleMusic()">üéµ Music</button>
<button onclick="showPoem()">‚ú® Secret Poem</button>

<h3 id="countdown"></h3>

</div>

<!-- MUSIC -->
<audio id="music" src="valentine.mp3"></audio>


<!-- GALLERY (pakai .jpeg sesuai file lu) -->
<h2>Photo Gallery</h2>
<div class="gallery">
  <img src="1.jpeg">
  <img src="2.jpeg">
  <img src="3.jpeg">
  <img src="4.jpeg">
  <img src="5.jpeg">
  <img src="6.jpeg">
  <img src="7.jpeg">
  <img src="8.jpeg">
  <img src="9.jpeg">
</div>


<!-- MAP -->
<h2>Memory Map</h2>
<button onclick="clearMarkers()">Clear Memories</button>
<div id="map"></div>


<!-- POEM POPUP -->
<div id="poemBox">
  <div class="poem">
    <p id="poemText"></p>
    <button onclick="closePoem()">Tutup</button>
  </div>
</div>


<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
/* ‚ù§Ô∏è hearts animation */
setInterval(()=>{
  const h=document.createElement("div");
  h.className="heart";
  h.innerHTML="‚ù§Ô∏è";
  h.style.left=Math.random()*100+"vw";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
},300);


/* =========================
   MESSAGE (auto isi)
========================= */
const defaultMessage =
`valentine kali ini masih ditemani jarak tapi rindu Abang nggak ada nggak pernah berkurang justru makin jauh mungkin terasa betapa bahagia nya adeeeeeeeeeeee buat abanggggggg ü§çü§çü§ç`;

const msg=document.getElementById("message");

msg.value=localStorage.getItem("msg")||defaultMessage;
msg.oninput=()=>localStorage.setItem("msg",msg.value);


/* =========================
   POEM
========================= */
const poemText =
`adeeeee mungkin nggak selalu lihat seberapa besar rasa ini, karena jarak bikin semuanya terasa sunyi. Tapi di balik diamnya abanggggg, ada doa yang nggak pernah putus dan rindu yang nggak pernah habis.

Setiap hari, hati abanggggg tetap milih adeeeee. Jarak cuma memisahkan langkah, bukan perasaan.

Kalau suatu hari adeeeee merasa sendiri, ingat ya‚Ä¶ abanggggg selalu nyebut nama adeeeee dalam doa. ü§çü§çü§ç`;

function showPoem(){
  document.getElementById("poemText").innerText=poemText;
  poemBox.style.display="flex";
}
function closePoem(){
  poemBox.style.display="none";
}


/* =========================
   MUSIC
========================= */
const music=document.getElementById("music");
function toggleMusic(){
  music.paused?music.play():music.pause();
}


/* =========================
   COUNTDOWN
========================= */
const target=new Date(new Date().getFullYear(),1,14);
setInterval(()=>{
  const d=Math.ceil((target-new Date())/86400000);
  countdown.innerText=d+" days until Valentine's Day ‚ù§Ô∏è";
},1000);


/* =========================
   MAP + SAVE MARKER
========================= */
const map=L.map('map').setView([-6.2,106.8],5);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

let markers=JSON.parse(localStorage.getItem("markers")||"[]");

markers.forEach(m=>L.marker(m).addTo(map));

map.on("click",e=>{
  const c=[e.latlng.lat,e.latlng.lng];
  markers.push(c);
  localStorage.setItem("markers",JSON.stringify(markers));
  L.marker(c).addTo(map);
});

function clearMarkers(){
  localStorage.removeItem("markers");
  location.reload();
}
</script>

</body>
</html>
